[{
  "bookSourceComment": "    'host': 'app-api.pixiv.net',\n\n\t\t\t'user-agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.2903.113',\n\nâ¤ï¸codeï¼š200â¤ï¸messageï¼šOKâ¤ï¸headersï¼šâ¤ï¸rawï¼šResponse{protocol=http/1.1, code=200, message=OK, url=https://app-api.pixiv.net/web/v1/login?code_challenge=1CCsEWtwY7FlfE19PhTANzWxE100AD_70IBxyd0c84Q&code_challenge_method=S256&client=pixiv-android,{headers:{%27authorization%27:%20%27%27}}}â¤ï¸stringï¼šResponse{protocol=http/1.1, code=200, message=OK, url=https://app-api.pixiv.net/web/v1/login?code_challenge=1CCsEWtwY7FlfE19PhTANzWxE100AD_70IBxyd0c84Q&code_challenge_method=S256&client=pixiv-android,{headers:{%27authorization%27:%20%27%27}}}â¤ï¸cookieï¼šundefined",
  "bookSourceGroup": "ğŸ™ˆpixivå°è¯´",
  "bookSourceName": "ğŸŒˆpixivå°è¯´",
  "bookSourceType": 0,
  "bookSourceUrl": "æ´›å¨…æ©™-pixivå°è¯´",
  "bookUrlPattern": "http://127.0.0.1/0",
  "concurrentRate": "",
  "coverDecodeJs": "",
  "customOrder": 12,
  "enabled": true,
  "enabledCookieJar": true,
  "enabledExplore": true,
  "exploreUrl": "@js:\nvar obj = {\n\tåŠ¨æ€: {\n\t\t\"url\": `{{\n\t\t\tif (page == 1) {\n\t\t\turl = 'https://app-api.pixiv.net/v1/novel/follow?restrict=public';\n\t\t\t} else {url = source.get('nurl');}\n\t\t\turl\n\t\t\t}}`},\n\tæ¨è: {\n\t\t\"url\": `{{\n\t\t\tif (page == 1) {\n\t\t\turl = 'https://app-api.pixiv.net/v1/novel/recommended?include_privacy_policy=true&filter=for_android&include_ranking_novels=true';\n\t\t\t} else {url = source.get('nurl');}\n\t\t\turl\n\t\t\t}}`},\n\tæ”¶è—: {\n\t\t\"url\": `{{\n\t\t\tif (page == 1) {\n\t\t\t\tlet id = source.getLoginInfoMap().get('id');\n\t\t\t\turl = 'https://app-api.pixiv.net/v1/user/bookmarks/novel?user_id='+id+'&restrict=public';\n\t\t\t} else {url = source.get('nurl');}\n\t\t\turl\n\t\t\t}}`,\n\t\t\"wb\": 1},\n\tè¿½æ›´: {\n\t\t\"url\": `{{\n\t\t\tif (page == 1) {\n\t\t\t\turl = 'https://app-api.pixiv.net/v1/watchlist/novel';\n\t\t\t} else {url = source.get('nurl');}\n\t\t\turl\n\t\t\t}}`}\n\t\n\t}\n\n\nvar sort = [];\npush = (title, url, size, wrap) => sort.push({\n    \"title\": title,\n    \"url\": url,\n    \"style\": {\n      layout_flexGrow: size || 1,\n      layout_flexBasisPercent: -1,\n      layout_wrapBefore: wrap ? true : false\n     }\n  });\n\nfor (x in obj) {\npush(x, obj[x].url, obj[x].fg, obj[x].wb);\n}\nJSON.stringify(sort);",
  "header": "@js:\n(()=>{\n\tlet headers = gethd();\n//\tjava.log('ğŸŠ'+JSON.stringify(headers,null,4));\n\treturn JSON.stringify(headers);\n})();",
  "jsLib": "ua = 'PixivAndroidApp/5.0.166 (Android 14; RMX3366)';\nappv = '5.0.166';\na_l = 'zh-CN';\na_e = 'gzip';\n\nbiaoq = new RegExp('^(?:ä¿®ä»™|å¥‡å¹»|åå®«|çº¯çˆ±|ä¹±ä¼¦|æ¯å¥³|æ¯å­|çˆ¶å¥³|å¹¼å¥³|æ­£å¤ª|è¶³äº¤|è‚›äº¤|ä¸è¢œ|å‚¬çœ |ç³»ç»Ÿ|åŸåˆ›|ç»­å†™|è½¯é¥­æµ|ä¿®ç½—åœº|è§„åˆ™æ€ªè°ˆ|å¥³æ€§è§†è§’)$');\n\nfunction timemd5(time) {\n\tconst {java, source} = this;\nlet salt = '28c1fdd170a5204386cb1313c7077b34f83e4aaf4aa829ce78c231e05b0bae2c';\nlet hash = java.md5Encode(time + salt);\n\treturn hash;\n}\n\nfunction gethd() {\n\tconst {java, source} = this;\nlet time = java.timeFormatUTC(Date.now(),\"yyyy-MM-dd'T'HH:mm:ss'+00:00'\",8*60*60*1000);\nlet hash = this.timemd5(time);\nlet atk = source.getLoginHeader()||'';\n\tif (atk) {atk = String('Bearer '+atk);}\n   return headers = {\n    'x-client-time': time,\n    \t'user-agent': ua,\n    \t'accept-language': a_l,\n    \t'accept-encoding': a_e,\n    \t'authorization': atk,\n    \t'app-os': 'Android',\n    \t'app-os-version': 'Android 14',\n    \t'app-version': appv,\n    'x-client-hash': hash\n    \t }\n};\n\nfunction leng(str) {\n\tlet length = 0;\n\tconst fuhao = ',.?!:;()[]\"';\n\tconst fuhao2 = 'ğŸ“˜';\n\tfor (char of str) {\n\t\tif (fuhao.includes(char) ) length += 0.5;\n\t\telse if (fuhao2.includes(char) ) length += 2;\n\t\telse length += 1;\n\t\t}\n\t\treturn length;\n}\n\nconst imgoptions = {\n  headers: {\n    'user-agent': 'PixivIOSApp/5.8.0',\n    'accept-encoding': 'gzip, br',\n    'referer': 'https://app-api.pixiv.net/',\n    'host': 'i.pximg.net'\n    }\n  };",
  "lastUpdateTime": 1736772534307,
  "loginCheckJs": "//java.toast('ç™»å½•æ£€æŸ¥ï¼š'+result);\n\nif (result.code() == 400) {\n\tsource.login();\n\tPackages.java.lang.Thread.sleep(500);\n\tlet headers = gethd();\n\tresult = java.connect(result.url(),headers);\n\t}\n\nresult",
  "loginUi": "[\n    {\n        name: \"tokenè¯´æ˜\",\n        type: \"button\",\n        action: \"java.longToast(`\ntokenè¯´æ˜ï¼šå¡«å†™è¯¥å€¼åç‚¹å‡»å³ä¸Šè§’âˆšè¿›è¡Œç™»å½•`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.4\n        }\n    },\n    {\n        name: \"idè¯´æ˜\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.4\n        }\n    },\n    {\n        name: \"token\",\n        type: \"text\"\n    },\n    {\n        name: \"id\",\n        type: \"text\"\n    },\n     {\n        name: \"â†“ã€€è¿½ã€€æ›´ã€€è¯¥ã€€ä¹¦ã€€\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 2,\n            \"layout_flexBasisPercent\": 0.5\n        }\n    },\n     {\n        name: \"è¯´æ˜\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.2\n        }\n    },\n     {\n        name: \"âŒ\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.15\n        }\n    },\n    {\n        name: \"ä¹¦å\",\n        type: \"text\"\n    },\n    {\n        name: \"â†“ã€€æ”¶ã€€è—ã€€è¯¥ã€€ç« \",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 2,\n            \"layout_flexBasisPercent\": 0.5\n        }\n    },\n     {\n        name: \"è¯´æ˜\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.2\n        }\n    },\n     {\n        name: \"âŒ\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.15\n        }\n    },\n    {\n        name: \"ç« èŠ‚\",\n        type: \"text\"\n    },\n    {\n        name: \"â†“ã€€å…³ æ³¨ è¯¥ ä½œ è€…ã€€\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 2,\n            \"layout_flexBasisPercent\": 0.5\n        }\n    },\n     {\n        name: \"è¯´æ˜\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.2\n        }\n    },\n     {\n        name: \"âŒ\",\n        type: \"button\",\n        action: \"java.longToast(`\nidè¯´æ˜ï¼šç™»å½•æ—¶è¯¥å€¼ä¸ºç©ºä¼šè‡ªåŠ¨å¡«å†™è¯¥å€¼ï¼Œè¿™æ˜¯ç™»å½•è´¦å·çš„IDï¼ˆå¯æ‰‹åŠ¨æ›´æ”¹ï¼‰ã€‚\nå‘ç°é¡µçš„æ”¶è—åˆ†ç±»åŠ è½½çš„è¯¥IDçš„æ”¶è—`);\",\n        style: {\n            \"layout_flexGrow\": 1,\n            \"layout_flexBasisPercent\": 0.15\n        }\n    },\n    {\n        name: \"ä½œè€…\",\n        type: \"text\"\n    },\n    {\n        name: \"ğŸ’æ³¨å†Œ \",\n        type: \"button\",\n        action: \"web()\"\n    },\n    {\n        name: \"â™¤ç™»å‡º\",\n        type: \"button\",\n        action: \"re()\"\n    },\n    {\n    \tname: \"ğŸ’¬è¯´æ˜\",\n    \ttype: \"button\",\n    \taction: \"sm()\"\n    \t},\n    \t{\n        name: \"ğŸŒæµ‹è¯•\",\n        type: \"button\",\n        action: \"ceshi()\"\n    },\n    \t{\n        name: \"ğŸ†•ç‰ˆæœ¬æ›´æ–°\",\n        type: \"button\",\n        action: \"gengxin()\"\n    },\n    \t{\n        name: \"åŒä¹¦åä¹¦æ¶å…±å­˜\",\n        type: \"button\",\n        action: \"gongcun()\"\n    }\n]",
  "loginUrl": "function gongcun() {\nlet gc = source.get('gc');\nif(gc!=1) {source.put('gc',1);java.toast('å·²å¼€å¯');}\nelse {source.put('gc',0);java.toast('å·²å…³é—­');}\n\t}\n\nfunction web() {\n\tlet url = 'https://app-api.pixiv.net/web/v1/login?code_challenge=1CCsEWtwY7FlfE19PhTANzWxE100AD_70IBxyd0c84Q&code_challenge_method=S256&client=pixiv-android';\n\t//url='https://accounts.pixiv.net/login';\n\t//url=\"https://www.baidu.com\"\n\turl=\"https://accounts.pixiv.net/login\"\n\trr=java.startBrowserAwait(url+`,{\n\t\theaders:{\n\t\t\t'authorization': ''\n\t\t\t}\n\t\t}`,'ç™»å½•');\n\tck=cookie.getCookie('https://accounts.pixiv.net');\n\tsource.setVariable('â¤ï¸codeï¼š'+rr.code()+'â¤ï¸messageï¼š'+rr.message()+'â¤ï¸headersï¼š'+rr.headers().get('authorization')+'â¤ï¸rawï¼š'+rr.raw()+'â¤ï¸stringï¼š'+rr.toString()+'â¤ï¸cookieï¼š'+rr.cookies+'â¤ï¸ckï¼š'+ck)\n\t}\r\nfunction login() {\nlet time = java.timeFormatUTC(Date.now(),\"yyyy-MM-dd'T'HH:mm:ss'+00:00'\",8*60*60*1000);\nlet hash = timemd5(time);\n\tlet headers = {\n    'user-agent': 'PixivAndroidApp/5.0.155 (Android 6.0; Pixel C)',\n    'accept-encoding': a_e,\n    'content-type': 'application/x-www-form-urlencoded',\n    'x-client-hash': hash,\n    'accept-language': a_l,\n    'app-version': appv,\n    'app-os-version': 'Android 6.0',\n    'x-client-time': time,\n    'app-os': 'Android'\n  };\n  let url = 'https://oauth.secure.pixiv.net/auth/token';\n  var Info=source.getLoginInfoMap();\n  let tk = String(Info['token'])||result['token'];\n  Info['token'] = tk;\r\n  //let pw = String(Info['å¯†ç '])||result['å¯†ç '];\n  let body = `client_id=MOBrBDS8blbauoSck0ZfDbtuzpyT&client_secret=lsACyCD94FhDUtGTXi3QzcFE2uU1hqtDaKeqrdwj&grant_type=refresh_token&refresh_token=${tk}&include_policy=true`;\ntry {\n\tlet rr = java.post(url,body,headers).body();\n\tlet atk = rr.match(/\"access_token\"[:\\s\"]+([^\"]+)/)[1];\n\tsource.putLoginHeader(atk);\n\tlet \tid = com.jayway.jsonpath.JsonPath.read(rr, \"$.user.id\");\n\tif (Info['id']=='') Info['id']= id;\n\tsource.putLoginInfo(JSON.stringify(Info));\n\tjava.toast('\\nğŸ˜†ç™»å½•æˆåŠŸ');\n\t} catch(err) {\n\t\tjava.toast('\\nğŸ’”ç™»å½•å¤±è´¥');\n\t\t}\n\n  \t//ä¸ºäº†æ˜¾ç¤ºç»“æœ\n  Packages.java.lang.Thread.sleep(500);\n\t}",
  "respondTime": 180000,
  "ruleBookInfo": {
    "author": "$.novel_series_detail.user.name\n<js>\nlet uid = java.get('uid');\nlet auth = result || String(book.author).replace(/[\\u200b]+/,'')\nif (uid == '') {uid = java.getString('$.novel_series_detail.user.id');}\nlet Info=source.getLoginInfoMap();\nInfo['ä½œè€…'] = auth;\ncache.putMemory('uid',uid);\nsource.putLoginInfo(JSON.stringify(Info));\n'\\u200b' + auth\n</js>",
    "canReName": "1",
    "init": "<js>\n\nvar sid = java.get('sid');\nif (sid == 'ğŸ‡¨ğŸ‡³'||sid == '') {\n\tlet Info=source.getLoginInfoMap();\n\tlet bkn = String(book.name);\n\tlet id = java.hexDecodeToString(result).match(/\\d+$/)[0];\n\tInfo['ä¹¦å'] = '';\n\tcache.putMemory('sid','');\n\tInfo['ç« èŠ‚'] = bkn;\n\tcache.putMemory('id',id);\n\tsource.putLoginInfo(JSON.stringify(Info));\n\tlet length = leng(bkn);\n\t\tif (length > 18) book.intro= 'ã€Š'+book.name+'ã€‹\\n'+ java.get('jianjie');\n\t\t\n\trr='1';\n\t}\n\nelse {\nlet url = 'https://app-api.pixiv.net/v2/novel/series?series_id=' + sid;\n//ä¿®æ­£bookurl\nbook.bookUrl = `data:;base64,${java.base64Encode(url)},{'type':''}`;\n\ntry {\n\nlet headers = gethd();\njg = java.connect(url, headers);\nrr = jg.body();\nif (jg.code() == 400) {\n\tsource.login();\n\tPackages.java.lang.Thread.sleep(500);\n\tlet headers = gethd();\n\trr = java.get(url, headers).body();\n\t}\n\n} catch(err) {\n\trr={};\n\tjava.toast('è¯¦æƒ…é¡µé“¾æ¥åŠ è½½å¤±è´¥'+sid);\n\t}\n\n//è®¾ç½®è§£æç»“æœ\njava.setContent(rr);\n\n//æ›´æ–°æ›´æ–°æ—¶é—´\ntry {\nlet tm = java.getString('$.novel_series_latest_novel.create_date');\nlet d = new Date(tm);\nd = java.timeFormatUTC(d,'yy/MM/dd',8*60*60*1000);\nbook.kind = String(book.kind).replace(/\\d+\\/\\d+\\/\\d+|$/,d).replace('null','');\n} catch(err) {java.toast('è¯¦æƒ…é¡µå†…å®¹é”™è¯¯');}\n\n//è·å–ä¹¦åå¹¶å‡€åŒ–\nlet bkn = String(java.getString('$.novel_series_detail.title')).replace(/^ã€Š(.+)ã€‹$/,'$1');\nbook.name = bkn.replace(/[(ï¼ˆ].{0,9}((?:ä»™ä¾ |çº¯çˆ±|åå®«|èè‰).?){3,}.{0,9}[)ï¼‰](?=\\s*[ä¸€-ê€€])/,'');\n\njava.log('â”Œè·å–ä¹¦å\\n[99:99.999] â””'+book.name);\n\n//è·å–ä¹¦åå¤±è´¥\nif (book.name == '') {\n\t//æ•ˆæœï¼Œunicodeè½¬å­—ç¬¦\n\t// let ee = JSON.stringify(JSON.parse(rr) );\n\tlet txte = java.getString('$..user_message',rr);\n\t//å¼¹å‡ºæç¤ºï¼Œsidç›¸åº”åºåˆ—ä¸å­˜åœ¨\n\tjava.longToast('\\n'+txte);\n\t} else {\n\t//æ”¾å…¥ä¹¦å\n\tlet Info=source.getLoginInfoMap();\n\tInfo['ä¹¦å'] = book.name;\n\tcache.putMemory('sid',sid);\n\tInfo['ç« èŠ‚'] = '';\n\tcache.putMemory('id','');\n\tsource.putLoginInfo(JSON.stringify(Info));\n\t\n\t//åŒåå…±å­˜\n\tif (source.get('gc') == 1) book.name='ğŸ“˜'+book.name;\n\t}\n\n//è¡¥å……å°é¢é“¾æ¥\nif (book.coverUrl == null) {\n\tlet img = java.getString('$.novel_series_latest_novel.image_urls.large');\n\tbook.coverUrl = img+','+JSON.stringify(imgoptions);\n\t\njava.log('â”Œè·å–å°é¢\\n[99:99.999] â””'+book.coverUrl);\n}\n\n//è®¡ç®—ä¹¦åé•¿åº¦\nlet length = leng(String(book.name));\n//å¤§äº18ä¸ªå…¨è§’å­—ç¬¦\nif (length > 18) length= 'ã€Š'+String(book.name).replace(/^ğŸ“˜/,'')+'ã€‹\\n';\nelse length = '';\n\nlet jianjie = java.getString('$.novel_series_detail.caption');\nbook.intro = length+java.get('jianjie');\njava.put('jianjie',jianjie);\ncache.put('bookr',rr);\n}\n\n\trr\n</js>",
    "intro": "",
    "lastChapter": "$.novel_series_latest_novel.title##ã€?{{book.name}}ã€‘?",
    "name": "",
    "tocUrl": "{{book.bookUrl}}",
    "wordCount": "$.novel_series_detail.total_character_count"
  },
  "ruleContent": {
    "content": "script.0@html\n<js>\nlet Info=source.getLoginInfoMap();\nlet id = String(chapter.url).match(/\\d+$/)[0];\nInfo['ç« èŠ‚'] = chapter.title;\ncache.putMemory('id',id);\nsource.putLoginInfo(JSON.stringify(Info));\n\nlet rr = result.match(/novel:\\s*({.+})/)[1];\n//let rr = JSON.stringify(JSON.parse(rs), null, 4);\nlet urls = java.getString('$..urls',rr);\nlet tt = String(java.getString('$.text',rr));\nlet img1 = tt.match(/\\[uploadedimage\\:\\d+\\]/g)||'';\nlet img2 = tt.match(/\\[pixivimage\\:[\\d\\-]+\\]/g)||'';\nfor (x of img1) {\n\tlet id = x.match(/\\d+/)[0];\n\tlet url = java.getString('$..'+id+'.urls.original',rr);\n\tlet re = new RegExp('\\\\[uploadedimage\\\\:'+id+'\\\\]');\n\tlet hd = ','+JSON.stringify(imgoptions);\n\ttt = tt.replace(re,'<img src=\"'+url+hd+'\"/>');\n\t}\nfor (x of img2) {\n\tlet id = x.match(/[\\d\\-]+/)[0];\n\tlet url = java.getString('$..'+id+'..images.original',rr);\n\tif (url=='null') url = java.getString('$..'+id+'..images.medium',rr);\n\tlet re = new RegExp('\\\\[pixivimage\\\\:'+id+'\\\\]');\n\tlet hd = ','+JSON.stringify(imgoptions);\n\ttt = tt.replace(re,'<img src=\"'+url+hd+'\"/>');\n\t}\ntt.replaceAll('[newpage]','\\nâ€”æ¢é¡µç¬¦â€”\\n').replace(/\\[\\[jumpuri\\:(.+)\\>.+\\]\\]/,'ğŸ–‡ï¸$1ğŸ–‡ï¸')\n</js>",
    "imageStyle": "",
    "title": ""
  },
  "ruleExplore": {
    "author": "$.user.name\n<js>\nlet uid = java.getString('$.user.id');\njava.put('uid',uid);\nresult\n</js>",
    "bookList": "<js>\nif (baseUrl.startsWith('http://127.0') ) {\n\trr = [{}];\n\t} else {\nlet nurl = java.getString('$.next_url');\nif (nurl == '') {\n\tjava.toast('å‘ç°é¡µåˆ°åº•äº†');\n\tsource.put('nurl','http://127.0.0.1');\n\t}\nelse {\n\tsource.put('nurl',nurl);\n\t}\nif (baseUrl.includes('/watchlist/novel') ) {\n\trr = java.getElement(\"$.series\");\n\t} else { rr = java.getElement(\"$.novels\");}\n\n}\nrr\n</js>",
    "bookUrl": "<js>\nlet id = java.getString('$.id');\nlet sid = java.getString('$.series.id');\nbook.putCustomVariable('idï¼š'+id+'ï¼Œsidï¼š'+sid);\nlet rr = 'https://app-api.pixiv.net/webview/v2/novel?id=' + id;\n\nif (baseUrl.includes('/watchlist/novel') ) {\n\tsid = id;\n\tif (source.get('gc') == 1) book.name='ğŸ“˜'+book.name;\n}\nelse if (sid=='') {sid='ğŸ‡¨ğŸ‡³';}\nelse {\n\tlet jj = java.get('jianjie');\n\tjava.put('jianjie',book.name+'\\n'+jj);\n}\njava.put('sid',sid);\n`data:;base64,${java.base64Encode(rr)},{'type':''}`\n</js>",
    "coverUrl": "<js>\nif (baseUrl.includes('/watchlist/novel') ) {url = java.getString('$.url');}\nelse {url = java.getString('$.image_urls.large');}\n\nurl+','+JSON.stringify(imgoptions);\n</js>",
    "intro": "<js>\nlet jj = java.get('jianjie');\nlet rr = '\\n' + java.getString('$.caption');\nlet rs = java.htmlFormat(rr);\njava.put('jianjie',rs);\njj + rs\n</js>",
    "kind": "<js>\nif (baseUrl.includes('/watchlist/novel') ) {\n\trrr = '';\n\ttm = java.getString('$.last_published_content_datetime');\n\t} else {\n\t\tlet tags = java.getStringList('$.tags..name');\n\t\t//å°†listæ•°ç»„å¤„ç†ä¸ºjsæ­£å¸¸æ•°ç»„ï¼Œå¹¶ä¸”ä¿è¯äº†å…ƒç´ å€¼ä¸ºjså­—ç¬¦ä¸²\n\t\trr=String(tags).slice(1,-1).split(', ');\n\t\t//ä¸‹é¢æ–¹å¼ä¼šå¤æ‚äº†ç‚¹ï¼Œä½†èƒ½ä¿è¯å…ƒç´ ä¹Ÿèƒ½å«é€—å·\n\t\t//rr = Array.from(tags);rr=rr.join().split(',');\n\t\trrr = rr.filter(i => biaoq.test(i) );\n\t\trr.forEach(x=>{\n\t\t\tif (x=='èè‰') {\n\t\t\t\tif (!rrr.includes('å¹¼å¥³')) rrr.unshift(x);\n\t\t\t\t}\n\t\t\telse if (x=='ä»™ä¾ '||x=='å¤é£') {\n\t\t\t\tif (!rrr.includes('ä¿®ä»™')) rrr.unshift(x);\n\t\t\t\t}\n\t});\n\t\ttm = java.getString('$.create_date');\n}\nlet d=new Date(tm);\nd=java.timeFormatUTC(d,'yy/MM/dd',8*60*60*1000);\n\nrrr.toString()+','+d\n</js>",
    "lastChapter": "",
    "name": "$.title\n<js>\nlet bookn = String(java.getString('$.series.title')).replace(/^ã€Š(.+)ã€‹$/,'$1');\nif (bookn != '') {\n\tjava.put('jianjie', 'ã€Š'+bookn+'ã€‹\\n');\n\tresult = result.replace(bookn,'â™¸').replace(/[ã€Šã€]?â™¸[ã€‘ã€‹]?/,'')||result;\n\t}\nresult = result.replace(/[(ï¼ˆ].{0,9}((?:ä»™ä¾ |çº¯çˆ±|åå®«|èè‰).?){3,}.{0,9}[)ï¼‰](?=\\s*[ä¸€-ê€€])/,'').replace(/ã€Š(.+)ã€‹/,'$1');\nresult\n</js>",
    "wordCount": "$.text_length"
  },
  "ruleSearch": {
    "author": "$.user.name\n<js>\nlet uid = java.getString('$.user.id');\njava.put('uid',uid);\nresult\n</js>",
    "bookList": "<js>\npage=cache.getFromMemory('page');\ncache.deleteMemory('page');\n//source.setVariable(src)\nif (baseUrl.startsWith('http://127.')) {rr = [{}];}\n\nelse {\nrr = java.getElement('$.novels');\nnurl = java.getString('$.next_url');\njava.log('nurlğŸŠ'+nurl+'ğŸŠ');\nif (rr.length<7&&page==1&&nurl!='') {\n\t//å¤„ç†ä¸è§¦å‘ä¸‹ä¸€é¡µä¸”æœ‰nurlçš„æƒ…å†µ\n\tPackages.java.lang.Thread.sleep(500);\n\trs = java.ajax(nurl);\n\tjava.setContent(rs)\n\trrr = java.getElement('$.novels');\n\t//åˆå¹¶å¯¹è±¡å‡½æ•°ï¼Œå¯ç›´æ¥ç”¨\n\trr.addAll(rrr);\n\tnurl = java.getString('$.next_url');\n}\n\nif (nurl == '') {\n\tjava.toast('æœç´¢é¡µåˆ°åº•äº†');\n\tsource.put('nurl','http://127.0.0.1');\n\t} else {source.put('nurl',nurl);}\n\n}\nrr\n</js>",
    "bookUrl": "<js>\nlet id = java.getString('$.id');\n//java.log('ğŸŠ'+id+'ğŸŠ');\nlet sid = java.getString('$.series.id');\nbook.putCustomVariable('idï¼š'+id+'ï¼Œsidï¼š'+sid);\nif (sid=='') {\n\tsid='ğŸ‡¨ğŸ‡³';\n\t} else {\n\tlet jj = java.get('jianjie');\n\tjava.put('jianjie',book.name+'\\n'+jj);\n\t}\nlet rr = 'https://app-api.pixiv.net/webview/v2/novel?id=' + id;\njava.put('sid',sid);\n`data:;base64,${java.base64Encode(rr)},{'type':''}`\n</js>",
    "checkKeyWord": "10180126",
    "coverUrl": "$.image_urls.large\n<js>\nresult+','+JSON.stringify(imgoptions);\n</js>",
    "intro": "<js>\nlet jj = java.get('jianjie');\nlet rr = '\\n' + java.getString('$.caption');\nlet rs = java.htmlFormat(rr);\njava.put('jianjie',rs);\njj + rs\n</js>",
    "kind": "<js>\njava.getStringList(String(source.ruleExplore.kind))\n</js>",
    "name": "$.title\n<js>\nlet bookn = String(java.getString('$.series.title')).replace(/^ã€Š(.+)ã€‹$/,'$1');\nif (bookn != '') {\n\tjava.put('jianjie', 'ã€Š'+bookn+'ã€‹\\n');\n\tresult = result.replace(bookn,'â™¸').replace(/[ã€Šã€]?â™¸[ã€‘ã€‹]?/,'')||result;\n\t}\nresult = result.replace(/[(ï¼ˆ].{0,9}((?:ä»™ä¾ |çº¯çˆ±|åå®«|èè‰).?){3,}.{0,9}[)ï¼‰](?=\\s*[ä¸€-ê€€])/,'').replace(/ã€Š(.+)ã€‹/,'$1');\nresult\n</js>",
    "wordCount": "$.text_length"
  },
  "ruleToc": {
    "chapterList": "<js>\nlet sid = java.get('sid');\nif (sid == 'ğŸ‡¨ğŸ‡³') {rr=[result];}\nelse {\n\tlet i = java.get('i');\n\tif (i==0) {\n\t\tjava.setContent(cache.get('bookr'));\n\t\t}\nrr = java.getElement('$.novels');\n}\nrr\n</js>",
    "chapterName": "<js>\nlet sid = java.get('sid');\nif (sid == 'ğŸ‡¨ğŸ‡³') {cc=book.name}\nelse {\nlet title = java.getString('$.title')\ntitle = String(title).replace(/[(ï¼ˆ].{0,9}((?:ä»™ä¾ |çº¯çˆ±|åå®«|èè‰).?){3,}.{0,9}[)ï¼‰](?=\\s*[ä¸€-ê€€])/,'');\nlet bkn=String(book.name).replace(/^ğŸ“˜|[ã€‚ï¼Ÿï¼]+$/g,'');\n//æ¶ˆé™¤åä¸å‰©å­—åˆ™ä¸æ¶ˆé™¤\ncc = title.replace(bkn,'â™¸').replace(/[ã€Šã€]?â™¸[ã€‚ï¼Ÿï¼]*[ã€‘ã€‹]?/,'')||title;\n\t}\n\tcc\n</js>",
    "chapterUrl": "<js>\nlet sid = java.get('sid');\nif (sid == 'ğŸ‡¨ğŸ‡³') {\n\t\tuu=java.hexDecodeToString(result);\n\t\tbook.putCustomVariable('å•è´´é“¾æ¥ï¼š'+uu);\n\t}\nelse {\nlet id = java.getString('$.id');\nuu='https://app-api.pixiv.net/webview/v2/novel?id=' + id\n}\nuu\n</js>",
    "isPay": "",
    "nextTocUrl": "$.next_url\n<js>\nif (result) {\njava.put('i',1);\n}\nresult\n</js>",
    "preUpdateJs": "java.put('i',0);",
    "updateTime": "$.create_date\n<js>\nif (result) {\nlet d=new Date(result);\nupt=java.timeFormatUTC(d,\"yyyy/MM/dd HH:mm\",8*60*60*1000);\n}\nelse '';\n</js>"
  },
  "searchUrl": "<js>\nif (page == 1) {\ncache.putMemory('page',page);\n\tif (/\\d{5,}$/.test(key) ) {\n\t\tlet sid = key.match(/\\d+$/)[0];\n\t\tjava.put('sid',sid);\n\t\turl = 'http://127.0.0.1/0'\n\t\t}\n\t\telse if (/^\\u200b/.test(key)) {\n\t\t\tlet uid = cache.getFromMemory('uid');\n\t\t\turl = 'https://app-api.pixiv.net/v1/user/novels?filter=for_android&user_id=' + uid;}\n\t\telse { url = 'https://app-api.pixiv.net/v1/search/novel?filter=for_android&merge_plain_keyword_results=true&word='+key;}\n\n} else {url = source.get('nurl');}\n\turl\n</js>",
  "weight": 0
}]
